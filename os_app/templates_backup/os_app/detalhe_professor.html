{% extends "os_app/base.html" %}

{% block title %}{{ professor.nome }} - SISPROF{% endblock %}

{% block extra_css %}
<style>
/* For√ßar centraliza√ß√£o da foto */
.foto-container-detalhes {
    width: 100%;
    text-align: center;
    margin-bottom: 20px;
}

.foto-frame-detalhes {
    width: 200px;
    height: 200px;
    border: 4px solid #3498db;
    border-radius: 15px;
    overflow: hidden;
    display: inline-flex; /* inline-flex para respeitar text-align */
    justify-content: center;
    align-items: center;
    background: #f8f9fa;
    box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
}

.foto-professor-detalhes {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.foto-placeholder-detalhes {
    text-align: center;
    color: #adb5bd;
}

.foto-placeholder-detalhes i {
    font-size: 100px;
    display: block;
}
</style>
{% endblock %}

{% block content %}
<div class="animate-fade-in">
    <!-- Header -->
    <div class="row mb-4">
        <div class="col-md-8">
            <h2 class="fw-bold">
                <i class="bi bi-person-circle text-primary"></i> {{ professor.nome }}
            </h2>
            <p class="text-muted">Detalhes completos do professor</p>
        </div>
        <div class="col-md-4 text-md-end">
            <a href="{% url 'os_app:editar_professor' professor.id %}" class="btn btn-warning me-2">
                <i class="bi bi-pencil"></i> Editar
            </a>
            <a href="{% url 'os_app:lista_professores' %}" class="btn btn-secondary">
                <i class="bi bi-arrow-left"></i> Voltar
            </a>
        </div>
    </div>

    <div class="row g-4">
       <!-- Foto do Professor -->
<div class="col-lg-4">
    <!-- Card da Foto -->
    <div class="card mb-3">
        <div class="card-header bg-primary text-white text-center">
            <h5 class="mb-0">
                <i class="bi bi-camera"></i> Foto
            </h5>
        </div>
        <div class="card-body text-center">
            <!-- Container com foto -->
            <div class="foto-container-detalhes">
                <div class="foto-frame-detalhes">
                    {% if professor.foto %}
                        <img src="{{ professor.foto.url }}" alt="{{ professor.nome }}" class="foto-professor-detalhes">
                    {% else %}
                        <div class="foto-placeholder-detalhes">
                            <i class="bi bi-person-circle"></i>
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Nome -->
            <h5 class="mt-3 mb-1">{{ professor.nome }}</h5>
            
            <!-- √Årea de atua√ß√£o -->
            <p class="text-muted small mb-2">
                {% if professor.area_atuacao %}
                    {{ professor.get_area_atuacao_display }}
                {% else %}
                    Professor
                {% endif %}
            </p>
            
            <!-- Escola -->
            {% if professor.escola %}
            <p class="text-muted small mb-0">
                <i class="bi bi-building"></i> {{ professor.escola.nome }}
            </p>
            {% elif professor.escola_nucleo %}
            <p class="text-muted small mb-0">
                <i class="bi bi-buildings"></i> {{ professor.escola_nucleo.nome }}
            </p>
            {% endif %}
        </div>
    </div>

    <!-- Card de Observa√ß√µes -->
    <div class="card">
        <div class="card-header bg-warning text-dark">
            <h5 class="mb-0">
                <i class="bi bi-chat-left-text"></i> Observa√ß√µes
            </h5>
        </div>
        <div class="card-body">
            {% if professor.observacao_turmas %}
                <p class="mb-0" style="white-space: pre-wrap;">{{ professor.observacao_turmas }}</p>
            {% else %}
                <p class="text-muted fst-italic mb-0">
                    <i class="bi bi-info-circle"></i> Nenhuma observa√ß√£o cadastrada
                </p>
            {% endif %}
        </div>
    </div>
</div>

        <!-- Informa√ß√µes Completas -->
        <div class="col-lg-8">
            <!-- Informa√ß√µes Pessoais -->
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-person-vcard"></i> Informa√ß√µes Pessoais
                    </h5>
                </div>
                <div class="card-body">
                          <div class="col-md-6">
                            <p class="mb-3">
                                <strong><i class="bi bi-card-heading"></i> Ref. Global</strong><br>
                                {% if professor.ref_global %}
                                    <span class="badge bg-secondary">{{ professor.ref_global }}</span>
                                {% else %}
                                    <span class="text-muted">N√£o informada</span>
                                {% endif %}
                            </p>
                           </div>


                    <div class="row mb-3">
                        <div class="col-md-6">        
                            <p class="mb-2">
                                <strong><i class="bi bi-credit-card"></i> CPF:</strong><br>
                                {{ professor.cpf_formatado }}
                            </p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-2">
                                <strong><i class="bi bi-card-heading"></i> Matr√≠cula:</strong><br>
                                {% if professor.matricula %}
                                    <span class="badge bg-secondary">{{ professor.matricula }}</span>
                                {% else %}
                                    <span class="text-muted">N√£o informada</span>
                                {% endif %}
                            </p>

                           </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p class="mb-2">
                                <strong><i class="bi bi-telephone"></i> Telefone:</strong><br>
                                <a href="tel:{{ professor.telefone }}" class="text-decoration-none">
                                    {{ professor.telefone }}
                                </a>
                            </p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-2">
                                <strong><i class="bi bi-envelope"></i> E-mail:</strong><br>
                                <a href="mailto:{{ professor.email }}" class="text-decoration-none">
                                    {{ professor.email }}
                                </a>
                            </p>
                             
                    </div>

                    <div class="row">
                        <div class="col-12">
                            <p class="mb-0 small text-muted">
                                <i class="bi bi-calendar-plus"></i> Cadastrado em: 
                                <strong>{{ professor.data_cadastro|date:"d/m/Y H:i" }}</strong>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

 <!-- Endere√ßo Completo -->
            <div class="card mb-4">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-geo-alt"></i> Endere√ßo
                    </h5>
                </div>
                <div class="card-body">
                    {% if professor.endereco or professor.bairro or professor.cidade %}
                    <p class="mb-2">
                        {% if professor.endereco %}
                            <i class="bi bi-house-door"></i> {{ professor.endereco }}
                            {% if professor.numero %}, {{ professor.numero }}{% endif %}
                            <br>
                        {% endif %}
                        {% if professor.bairro %}
                            <i class="bi bi-signpost"></i> {{ professor.bairro.nome }}<br>
                        {% endif %}
                        {% if professor.cidade %}
                            <i class="bi bi-pin-map"></i> {{ professor.cidade }} - {{ professor.estado }}
                        {% endif %}
                        {% if professor.cep %}
                            <br><i class="bi bi-mailbox"></i> CEP: {{ professor.cep }}
                        {% endif %}
                    </p>
                    {% else %}
                    <p class="text-muted mb-0">Endere√ßo n√£o informado</p>
                    {% endif %}
                </div>
            </div>

            <!-- Informa√ß√µes Profissionais -->
            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-briefcase"></i> Informa√ß√µes Profissionais
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p class="mb-2">
                                <strong><i class="bi bi-award"></i> Cargo:</strong><br>
                                {% if professor.cargo %}
                                    <span class="badge bg-warning text-dark fs-6">{{ professor.cargo.nome }}</span>
                                {% else %}
                                    <span class="text-muted">N√£o definido</span>
                                {% endif %}
                            </p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-2">
                                <strong><i class="bi bi-book"></i> √Årea de Atua√ß√£o:</strong><br>
                                {% if professor.area_atuacao %}
                                    <span class="badge bg-info fs-6">{{ professor.get_area_atuacao_display }}</span>
                                {% else %}
                                    <span class="text-muted">N√£o definida</span>
                                {% endif %}
                            </p>
                        </div>
                    </div>

                    <!-- ============================================================ -->
                    <!-- MAT√âRIAS - CORRIGIDO -->
                    <!-- ============================================================ -->
                    <div class="row mb-3">
                        <div class="col-12">
                            <p class="mb-2">
                                <strong><i class="bi bi-book"></i> Mat√©rias:</strong><br>
                                {% if professor.materias %}
                                    {% for materia_display in professor.get_materias_display %}
                                        {% if 'Portugu√™s' in materia_display %}
                                            <span class="badge bg-primary me-1 mb-1 fs-6 py-2 px-3">
                                                üìñ {{ materia_display }}
                                            </span>
                                        {% elif 'Matem√°tica' in materia_display %}
                                            <span class="badge bg-success me-1 mb-1 fs-6 py-2 px-3">
                                                üßÆ {{ materia_display }}
                                            </span>
                                        {% elif 'Hist√≥ria' in materia_display %}
                                            <span class="badge bg-warning text-dark me-1 mb-1 fs-6 py-2 px-3">
                                                ‚è≥ {{ materia_display }}
                                            </span>
                                        {% elif 'Geografia' in materia_display %}
                                            <span class="badge bg-info text-dark me-1 mb-1 fs-6 py-2 px-3">
                                                üåç {{ materia_display }}
                                            </span>
                                        {% elif 'Ci√™ncias' in materia_display %}
                                            <span class="badge bg-danger me-1 mb-1 fs-6 py-2 px-3">
                                                ‚öõÔ∏è {{ materia_display }}
                                            </span>
                                        {% elif 'Ed. F√≠sica' in materia_display %}
                                            <span class="badge bg-secondary me-1 mb-1 fs-6 py-2 px-3">
                                                üèÉ {{ materia_display }}
                                            </span>
                                        {% elif 'Artes' in materia_display %}
                                            <span class="badge me-1 mb-1 fs-6 py-2 px-3" style="background-color: #6f42c1; color: white;">
                                                üé® {{ materia_display }}
                                            </span>
                                        {% elif 'Religioso' in materia_display %}
                                            <span class="badge bg-dark me-1 mb-1 fs-6 py-2 px-3">
                                                ‚òÆÔ∏è {{ materia_display }}
                                            </span>
                                        {% elif 'Ingl√™s' in materia_display %}
                                            <span class="badge me-1 mb-1 fs-6 py-2 px-3" style="background-color: #20c997; color: white;">
                                                üåê {{ materia_display }}
                                            </span>
                                        {% else %}
                                            <span class="badge bg-secondary me-1 mb-1 fs-6 py-2 px-3">
                                                {{ materia_display }}
                                            </span>
                                        {% endif %}
                                    {% endfor %}
                                {% else %}
                                    <span class="text-muted">Nenhuma mat√©ria cadastrada</span>
                                {% endif %}
                            </p>
                        </div>
                    </div>

                    <div class="row mb-3">
    <div class="col-12">
        <p class="mb-2">
            <strong><i class="bi bi-building"></i> Escola de Lota√ß√£o:</strong><br>
            {% if professor.escola %}
                <i class="bi bi-building text-success"></i> 
                <span class="fs-5">{{ professor.escola.nome }}</span>
                <span class="badge bg-success ms-2">Escola Dependente</span>
                {% if professor.escola.nucleo %}
                    <br><small class="text-muted">
                        <i class="bi bi-buildings"></i> N√∫cleo: {{ professor.escola.nucleo.nome }}
                    </small>
                {% endif %}
                {% if professor.escola.codigo_inep %}
                    <br><small class="text-muted">INEP: {{ professor.escola.codigo_inep }}</small>
                {% endif %}
            {% elif professor.escola_nucleo %}
                <i class="bi bi-buildings text-primary"></i> 
                <span class="fs-5">{{ professor.escola_nucleo.nome }}</span>
                <span class="badge bg-primary ms-2">Escola N√∫cleo</span>
                {% if professor.escola_nucleo.codigo_inep %}
                    <br><small class="text-muted">INEP: {{ professor.escola_nucleo.codigo_inep }}</small>
                {% endif %}
            {% else %}
                <span class="text-muted">N√£o informada</span>
            {% endif %}
        </p>
    </div>
</div>

                    {% if professor.escola and professor.escola.nucleo %}
                    <div class="row">
                        <div class="col-12">
                            <p class="mb-0">
                                <strong><i class="bi bi-buildings"></i> N√∫cleo:</strong><br>
                                <span class="fs-5 text-primary">{{ professor.escola.nucleo.nome }}</span>
                                {% if professor.escola.nucleo.codigo %}
                                    <br><small class="text-muted">C√≥digo: {{ professor.escola.nucleo.codigo }}</small>
                                {% endif %}
                            </p>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}